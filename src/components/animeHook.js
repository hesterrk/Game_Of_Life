import React from 'react'

export const useAnimationFrame = callback => {
 
    const requestRef = React.useRef();
    const previousTimeRef = React.useRef();
    
    const animate = time => {
      if (previousTimeRef.current != undefined) {
          const deltaTime = time - previousTimeRef.current;
          callback(deltaTime)
      }
      previousTimeRef.current = time;
      requestRef.current = requestAnimationFrame(animate);
    }
    
    React.useEffect(() => {
      requestRef.current = requestAnimationFrame(animate);
      return () => cancelAnimationFrame(requestRef.current);
    }, []); // Make sure the effect runs only once
  }